import{TxnBuilderTypes as s,BCS as c,HexString as y,SupraAccount as Y}from"supra-l1-sdk-core";import $ from"axios";import{BCS as z,TxnBuilderTypes as p}from"supra-l1-sdk-core";var m=l=>{let t=new Array;return l.forEach(e=>{let n=e.value;t.push({struct:{address:n.address.toHexString().toString(),module:n.module_name.value,name:n.name.value,type_args:m(n.type_args)}})}),t},b=l=>{let t=new Array;return l.forEach(e=>{if(e instanceof p.TransactionArgumentU8)t.push({U8:e.value});else if(e instanceof p.TransactionArgumentU32)t.push({U32:e.value});else if(e instanceof p.TransactionArgumentU64)t.push({U64:Number(e.value)});else if(e instanceof p.TransactionArgumentU128)t.push({U128:Number(e.value)});else if(e instanceof p.TransactionArgumentU256)t.push({U256:Array.from(z.bcsSerializeU256(e.value))});else if(e instanceof p.TransactionArgumentAddress)t.push({Address:e.value.toHexString().toString()});else if(e instanceof p.TransactionArgumentU8Vector)t.push({U8Vector:Array.from(e.value)});else if(e instanceof p.TransactionArgumentBool)t.push({Bool:e.value});else throw new Error("Invalid script argument variant")}),t},A=l=>{let t=new Array;for(let e=0;e<l.length;e++)t.push(Array.from(l[e]));return t},h=l=>{let t=l.toLowerCase();if(t.length<66)return t.startsWith("0x")?t=t.slice(2).padStart(64,"0"):t=t.padStart(64,"0"),"0x"+t;if(t.length===66&&t.startsWith("0x"))return t;throw new Error("Invalid address. With '0x', address length should be exactly 66 characters.")},w=l=>new Promise(t=>{setTimeout(t,l)});var R=(n=>(n.Success="Success",n.Failed="Failed",n.Pending="Pending",n))(R||{}),E=(i=>(i.CoinTransfer="CoinTransfer",i.EntryFunctionCall="EntryFunctionCall",i.ScriptCall="ScriptCall",i.AutomationRegistration="AutomationRegistration",i.MultisigPayload="MultisigPayload",i))(E||{});var v=6,P=300,N=1e3,S=15,O=BigInt(5e5),I=BigInt(100),U=300,C=1e3,T="0x0000000000000000000000000000000000000000000000000000000000000001",f="0x1::supra_coin::SupraCoin",M=!1,F=!1,B=10,D=1020,J="SUPRA::RawTransaction",H="SUPRA::RawTransactionWithData";import x from"js-sha3";var q=class l{constructor(t,e=6){this.supraNodeURL=t,this.chainId=new s.ChainId(e)}static async init(t){let e=new l(t);return e.chainId=await e.getChainId(),e}async sendRequest(t,e,n){if(!t&&n===void 0)throw new Error("POST request requires a 'data' payload.");let a={method:t?"get":"post",baseURL:this.supraNodeURL,url:e,...t?{}:{data:n,headers:{"Content-Type":"application/json"}}},i=await $(a);if(i.status===404)throw new Error("Invalid URL \u2014 path not found (404).");if(i.status===500)throw new Error("Server error \u2014 please try again later.");return i}async getChainId(){return new s.ChainId(Number((await this.sendRequest(!0,"/rpc/v1/transactions/chain_id")).data))}async getGasPrice(){return BigInt((await this.sendRequest(!0,"/rpc/v1/transactions/estimate_gas_price")).data.mean_gas_price)}async fundAccountWithFaucet(t){let n=(await this.sendRequest(!0,`/rpc/v1/wallet/faucet/${t.toString()}`)).data;if(typeof n!="object"||n===null)throw new Error("Unexpected response format. Please try faucet later.");if(!("Accepted"in n))throw new Error("Faucet request failed \u2014 'Accepted' field not found in response.");let a=n.Accepted;return{status:await this.waitForTransactionCompletion(a),transactionHash:a}}async isAccountExists(t){let e=await this.sendRequest(!0,`/rpc/v1/accounts/${t.toString()}`);return!(e.data===null||e.status===202)}async getAccountInfo(t){let n=(await this.sendRequest(!0,`/rpc/v1/accounts/${t.toString()}`)).data;if(!n||typeof n!="object")throw new Error("Account does not exist or an invalid account was provided.");return{sequence_number:BigInt(n.sequence_number),authentication_key:n.authentication_key}}async getAccountResources(t,e){let n=`/rpc/v1/accounts/${t.toString()}/resources?count=${e?.count??15}`;return e?.start&&(n+=`&start=${e.start}`),(await this.sendRequest(!0,n)).data.Resources}async getResourceData(t,e){let a=(await this.sendRequest(!0,`/rpc/v1/accounts/${t.toString()}/resources/${e}`)).data?.result;if(!Array.isArray(a)||a.length===0||a[0]==null)throw new Error(`Resource of type '${e}' not found for account ${t.toString()}.`);return a[0]}async getTransactionStatus(t){let e=await this.sendRequest(!0,`/rpc/v1/transactions/${t}`);return e.data==null?null:e.data.status=="Unexecuted"?"Pending":e.data.status=="Fail"?"Failed":e.data.status}getCoinChangeAmount(t,e){let n=new Map;e.forEach(i=>{if((i.type==="0x1::coin::CoinDeposit"||i.type==="0x1::coin::CoinWithdraw")&&"0x"+i.data.account.substring(2,i.data.account).padStart(64,"0")===t){if(i.type==="0x1::coin::CoinDeposit"){let r=n.get(i.data.coin_type);r!=null?n.set(i.data.coin_type,{totalDeposit:r.totalDeposit+BigInt(i.data.amount),totalWithdraw:r.totalWithdraw}):n.set(i.data.coin_type,{totalDeposit:BigInt(i.data.amount),totalWithdraw:BigInt(0)})}else if(i.type==="0x1::coin::CoinWithdraw"){let r=n.get(i.data.coin_type);r!=null?n.set(i.data.coin_type,{totalDeposit:r.totalDeposit,totalWithdraw:r.totalWithdraw+BigInt(i.data.amount)}):n.set(i.data.coin_type,{totalDeposit:BigInt(0),totalWithdraw:BigInt(i.data.amount)})}}});let a=[];return n.forEach((i,r)=>{a.push({coinType:r,amount:i.totalDeposit-i.totalWithdraw})}),a}getTransactionInsights(t,e){let n={coinReceiver:"",coinChange:[{amount:BigInt(0),coinType:""}],type:"EntryFunctionCall"};if(e.payload.Move.type==="entry_function_payload")if(e.payload.Move.function==="0x1::supra_account::transfer"){let a=BigInt(e.payload.Move.arguments[1]);t===e.header.sender.Move&&(a*=BigInt(-1)),n.coinReceiver=e.payload.Move.arguments[0],n.coinChange[0]={amount:a,coinType:f},n.type="CoinTransfer"}else if(e.payload.Move.function==="0x1::supra_account::transfer_coins"||e.payload.Move.function==="0x1::coin::transfer"){let a=BigInt(e.payload.Move.arguments[1]);t===e.header.sender.Move&&(a*=BigInt(-1)),n.coinReceiver=e.payload.Move.arguments[0],n.coinChange[0]={amount:a,coinType:e.payload.Move.type_arguments[0]},n.type="CoinTransfer"}else e.status==="Success"&&(n.coinChange=this.getCoinChangeAmount(t,e.output.Move.events));else{if(e.payload.Move.type==="script_payload")n.type="ScriptCall";else if(e.payload.Move.type==="automation_registration_payload")n.type="AutomationRegistration";else if(e.payload.Move.type==="multisig_payload")n.type="MultisigPayload";else throw new Error("Unsupported transaction payload type.");e.status==="Success"&&(n.coinChange=this.getCoinChangeAmount(t,e.output.Move.events))}return n}async getTransactionDetail(t,e){let n=await this.sendRequest(!0,`/rpc/v1/transactions/${e}`);return n.data==null?null:n.data.status==="Pending"||n.data.output===null||n.data.header===null?{txHash:e,sender:n.data.header.sender.Move,sequenceNumber:n.data.header.sequence_number,maxGasAmount:n.data.header.max_gas_amount,gasUnitPrice:n.data.header.gas_unit_price,gasUsed:void 0,transactionCost:void 0,txExpirationTimestamp:Number(n.data.header.expiration_timestamp.microseconds_since_unix_epoch),txConfirmationTime:void 0,status:n.data.status,events:void 0,blockNumber:void 0,blockHash:void 0,transactionInsights:this.getTransactionInsights(t.toString(),n.data),vm_status:void 0}:{txHash:e,sender:n.data.header.sender.Move,sequenceNumber:n.data.header.sequence_number,maxGasAmount:n.data.header.max_gas_amount,gasUnitPrice:n.data.header.gas_unit_price,gasUsed:n.data.output?.Move.gas_used,transactionCost:n.data.header.gas_unit_price*n.data.output?.Move.gas_used,txExpirationTimestamp:Number(n.data.header.expiration_timestamp.microseconds_since_unix_epoch),txConfirmationTime:Number(n.data.block_header.timestamp.microseconds_since_unix_epoch),status:n.data.status=="Fail"||n.data.status=="Invalid"?"Failed":n.data.status,events:n.data.output?.Move.events,blockNumber:n.data.block_header.height,blockHash:n.data.block_header.hash,transactionInsights:this.getTransactionInsights(t.toString(),n.data),vm_status:n.data.output.Move.vm_status}}async getAccountTransactionsDetail(t,e){let n=`/rpc/v1/accounts/${t.toString()}/transactions?count=${e?.count??15}`;e?.start&&(n+=`&start=${e.start}`);let a=await this.sendRequest(!0,n);if(a.data.record==null)throw new Error("Account does not exist or an invalid account was provided.");let i=[];return a.data.record.forEach(r=>{i.push({txHash:r.hash,sender:r.header.sender.Move,sequenceNumber:r.header.sequence_number,maxGasAmount:r.header.max_gas_amount,gasUnitPrice:r.header.gas_unit_price,gasUsed:r.output.Move.gas_used,transactionCost:r.header.gas_unit_price*r.output.Move.gas_used,txExpirationTimestamp:Number(r.header.expiration_timestamp.microseconds_since_unix_epoch),txConfirmationTime:Number(r.block_header.timestamp.microseconds_since_unix_epoch),status:r.status==="Fail"||r.status==="Invalid"?"Failed":r.status,events:r.output.Move.events,blockNumber:r.block_header.height,blockHash:r.block_header.hash,transactionInsights:this.getTransactionInsights(t.toString(),r),vm_status:r.output.Move.vm_status})}),i}async getCoinTransactionsDetail(t,e){let n=`/rpc/v1/accounts/${t.toString()}/coin_transactions?count=${e?.count??15}`;e?.start&&(n+=`&start=${e?.start}`);let a=await this.sendRequest(!0,n);if(a.data.record==null)throw new Error("Account does not exist or an invalid account was provided.");let i=[];return a.data.record.forEach(r=>{i.push({txHash:r.hash,sender:r.header.sender.Move,sequenceNumber:r.header.sequence_number,maxGasAmount:r.header.max_gas_amount,gasUnitPrice:r.header.gas_unit_price,gasUsed:r.output.Move.gas_used,transactionCost:r.header.gas_unit_price*r.output.Move.gas_used,txExpirationTimestamp:Number(r.header.expiration_timestamp.microseconds_since_unix_epoch),txConfirmationTime:Number(r.block_header.timestamp.microseconds_since_unix_epoch),status:r.status==="Fail"||r.status==="Invalid"?"Failed":r.status,events:r.output.Move.events,blockNumber:r.block_header.height,blockHash:r.block_header.hash,transactionInsights:this.getTransactionInsights(t.toString(),r),vm_status:r.output.Move.vm_status})}),{transactions:i,cursor:a.data.cursor}}async getAccountCompleteTransactionsDetail(t,e=15){let n=await this.sendRequest(!0,`/rpc/v1/accounts/${t.toString()}/coin_transactions?count=${e}`),a=await this.sendRequest(!0,`/rpc/v1/accounts/${t.toString()}/transactions?count=${e}`),i=[];n.data.record!=null&&i.push(...n.data.record),a.data.record!=null&&i.push(...a.data.record);let r=i.filter((o,d,g)=>d===g.findIndex(_=>_.hash===o.hash));r.sort((o,d)=>o.block_header.timestamp.microseconds_since_unix_epoch<d.block_header.timestamp.microseconds_since_unix_epoch?1:-1);let u=[];return r.forEach(o=>{u.push({txHash:o.hash,sender:o.header.sender.Move,sequenceNumber:o.header.sequence_number,maxGasAmount:o.header.max_gas_amount,gasUnitPrice:o.header.gas_unit_price,gasUsed:o.output.Move.gas_used,transactionCost:o.header.gas_unit_price*o.output.Move.gas_used,txExpirationTimestamp:Number(o.header.expiration_timestamp.microseconds_since_unix_epoch),txConfirmationTime:Number(o.block_header.timestamp.microseconds_since_unix_epoch),status:o.status==="Fail"||o.status==="Invalid"?"Failed":o.status,events:o.output.Move.events,blockNumber:o.block_header.height,blockHash:o.block_header.hash,transactionInsights:this.getTransactionInsights(t.toString(),o),vm_status:o.output.Move.vm_status})}),u}async getCoinInfo(t){let e=await this.getResourceData(new y(t.split("::")[0]),`${T}::coin::CoinInfo<${t}>`);return{name:e.name,symbol:e.symbol,decimals:e.decimals}}async getAccountSupraCoinBalance(t){return await this.getAccountCoinBalance(t,f)}async getAccountCoinBalance(t,e){return BigInt((await this.invokeViewMethod("0x1::coin::balance",[e],[t.toString()]))[0])}async invokeViewMethod(t,e,n){return(await this.sendRequest(!1,"/rpc/v1/view",{function:t,type_arguments:e,arguments:n})).data.result}async getTableItemByKey(t,e,n,a){return(await this.sendRequest(!1,`/rpc/v1/tables/${t}/item`,{key_type:e,value_type:n,key:a})).data}async waitForTransactionCompletion(t){for(let e=0;e<300;e++){let n=await this.getTransactionStatus(t);if(n===null||n=="Pending")await w(1e3);else return n}return"Pending"}async sendTx(t,e){(e?.enableTransactionSimulation??M)===!0&&await this.simulateTx(t);let n=await this.sendRequest(!1,"/rpc/v1/transactions/submit",t);return console.log("Transaction Request Sent, Waiting For Completion"),{txHash:n.data,result:(e?.enableWaitForTransaction??F)===!0?await this.waitForTransactionCompletion(n.data):"Pending"}}static getSupraTransactionSignatureMessage(t){let e=Uint8Array.from(Buffer.from(x.sha3_256(t instanceof s.RawTransaction?J:H),"hex")),n=new Uint8Array(c.bcsToBytes(t)),a=new Uint8Array(e.length+n.length);return a.set(e),a.set(n,e.length),a}static signSupraTransaction(t,e){return t.signBuffer(l.getSupraTransactionSignatureMessage(e))}static signSupraMultiTransaction(t,e){let n=new s.Ed25519Signature(l.signSupraTransaction(t,e).toUint8Array());return new s.AccountAuthenticatorEd25519(new s.Ed25519PublicKey(t.signingKey.publicKey),n)}getTransactionPayloadJSON(t){if(t instanceof s.TransactionPayloadEntryFunction)return{EntryFunction:{module:{address:t.value.module_name.address.toHexString().toString(),name:t.value.module_name.name.value},function:t.value.function_name.value,ty_args:m(t.value.ty_args),args:A(t.value.args)}};if(t instanceof s.TransactionPayloadScript)return{Script:{code:Array.from(t.value.code),ty_args:m(t.value.ty_args),args:b(t.value.args)}};if(t instanceof s.TransactionPayloadAutomationRegistration){if(t.value instanceof s.AutomationRegistrationParamsV1)return{AutomationRegistration:{V1:{automated_function:{module:{address:t.value.value.automated_function.module_name.address.toHexString().toString(),name:t.value.value.automated_function.module_name.name.value},function:t.value.value.automated_function.function_name.value,ty_args:m(t.value.value.automated_function.ty_args),args:A(t.value.value.automated_function.args)},max_gas_amount:Number(t.value.value.max_gas_amount),gas_price_cap:Number(t.value.value.gas_price_cap),automation_fee_cap_for_epoch:Number(t.value.value.automation_fee_cap_for_epoch),expiration_timestamp_secs:Number(t.value.value.expiration_timestamp_secs),aux_data:A(t.value.value.aux_data)}}};throw new Error("Unknown variant of `AutomationRegistrationParams`")}else if(t instanceof s.TransactionPayloadMultisig){let e=t.value.multisig_address.toHexString().toString(),n=t.value.transaction_payload?.transaction_payload,a=n?{EntryFunction:{module:{address:n.module_name.address.toHexString().toString(),name:n.module_name.name.value},function:n.function_name.value,ty_args:m(n.ty_args),args:A(n.args)}}:void 0;return{Multisig:{multisig_address:e,transaction_payload:a}}}else throw new Error("Unknown variant of `TransactionPayload`")}getRawTxnJSON(t){return{sender:t.sender.toHexString().toString(),sequence_number:Number(t.sequence_number),payload:this.getTransactionPayloadJSON(t.payload),max_gas_amount:Number(t.max_gas_amount),gas_unit_price:Number(t.gas_unit_price),expiration_timestamp_secs:Number(t.expiration_timestamp_secs),chain_id:t.chain_id.value}}getSendTxPayload(t,e){return{Move:{raw_txn:this.getRawTxnJSON(e),authenticator:{Ed25519:{public_key:t.pubKey().toString(),signature:l.signSupraTransaction(t,e).toString()}}}}}async sendTxUsingSerializedRawTransaction(t,e,n){let a=this.getSendTxPayload(t,s.RawTransaction.deserialize(new c.Deserializer(e)));return await this.sendTx(a,n)}async sendTxUsingSerializedRawTransactionAndSignature(t,e,n,a){let i={Move:{raw_txn:this.getRawTxnJSON(s.RawTransaction.deserialize(new c.Deserializer(n))),authenticator:{Ed25519:{public_key:t.toString(),signature:e.toString()}}}};return await this.sendTx(i,a)}async sendSponsorTransaction(t,e,n,a,i,r=[],u){let o=[];r.forEach(g=>{o.push(this.getED25519AuthenticatorJSON(g))});let d={Move:{raw_txn:this.getRawTxnJSON(n),authenticator:{FeePayer:{sender:this.getED25519AuthenticatorJSON(a),secondary_signer_addresses:e,secondary_signers:o,fee_payer_address:t,fee_payer_signer:this.getED25519AuthenticatorJSON(i)}}}};return await this.sendTx(d,u)}async sendMultiAgentTransaction(t,e,n,a,i){let r=[];a.forEach(o=>{r.push(this.getED25519AuthenticatorJSON(o))});let u={Move:{raw_txn:this.getRawTxnJSON(e),authenticator:{MultiAgent:{sender:this.getED25519AuthenticatorJSON(n),secondary_signer_addresses:t,secondary_signers:r}}}};return await this.sendTx(u,i)}getED25519AuthenticatorJSON(t){return{Ed25519:{public_key:Buffer.from(t.public_key.value).toString("hex"),signature:Buffer.from(t.signature.value).toString("hex")}}}createRawTxObjectInner(t,e,n,a){return new s.RawTransaction(new s.AccountAddress(t.toUint8Array()),e,n,a?.maxGas??O,a?.gasUnitPrice??I,a?.txExpiryTime??BigInt(Math.ceil(Date.now()/C)+U),this.chainId)}async createRawTxObject(t,e,n,a,i,r,u,o){let d=new s.TransactionPayloadEntryFunction(new s.EntryFunction(new s.ModuleId(new s.AccountAddress(new y(h(n)).toUint8Array()),new s.Identifier(a)),new s.Identifier(i),r,u));return this.createRawTxObjectInner(t,e,d,o)}async createSerializedRawTxObject(t,e,n,a,i,r,u,o){return c.bcsToBytes(await this.createRawTxObject(t,e,n,a,i,r,u,o))}createSerializedScriptTxPayloadRawTxObject(t,e,n,a,i,r){let u=new s.TransactionPayloadScript(new s.Script(n,a,i));return c.bcsToBytes(this.createRawTxObjectInner(t,e,u,r))}createSerializedAutomationRegistrationTxPayloadRawTxObject(t,e,n,a,i,r,u,o,d,g,_,W,k){let L=new s.TransactionPayloadAutomationRegistration(new s.AutomationRegistrationParamsV1(new s.AutomationRegistrationParamsV1Data(new s.EntryFunction(new s.ModuleId(new s.AccountAddress(new y(h(n)).toUint8Array()),new s.Identifier(a)),new s.Identifier(i),r,u),o,d,g,_,W)));return c.bcsToBytes(this.createRawTxObjectInner(t,e,L,k))}createSerializedMultisigPayloadRawTxObject(t,e,n,a,i,r,u,o,d){let g=new s.TransactionPayloadMultisig(new s.MultiSig(s.AccountAddress.fromHex(n),new s.MultiSigTransactionPayload(new s.EntryFunction(new s.ModuleId(new s.AccountAddress(new y(h(a)).toUint8Array()),new s.Identifier(i)),new s.Identifier(r),u,o))));return c.bcsToBytes(this.createRawTxObjectInner(t,e,g,d))}async createSerializedRawTxObjectToCreateMultisigTx(t,e,n,a,i,r,u,o,d){let g=new s.MultiSigTransactionPayload(new s.EntryFunction(new s.ModuleId(new s.AccountAddress(new y(h(a)).toUint8Array()),new s.Identifier(i)),new s.Identifier(r),u,o)),_=new y(x.sha3_256(c.bcsToBytes(g)));return await this.createSerializedRawTxObject(t,e,T,"multisig_account","create_transaction_with_hash",[],[c.bcsToBytes(s.AccountAddress.fromHex(n)),c.bcsSerializeBytes(_.toUint8Array())],d)}static createSignedTransaction(t,e){return new s.SignedTransaction(e,new s.AccountAuthenticatorEd25519(new s.Ed25519PublicKey(t.pubKey().toUint8Array()),new s.Ed25519Signature(l.signSupraTransaction(t,e).toUint8Array())))}static deriveTransactionHash(t){return x.keccak256(c.bcsToBytes(t))}async transferSupraCoin(t,e,n,a){if(a?.optionalTransactionPayloadArgs&&!a?.optionalTransactionPayloadArgs?.maxGas){let r=BigInt(B);await this.isAccountExists(e)==!1&&(r=BigInt(D)),a.optionalTransactionPayloadArgs.maxGas=r}let i=this.getSendTxPayload(t,await this.createRawTxObject(t.address(),(await this.getAccountInfo(t.address())).sequence_number,T,"supra_account","transfer",[],[e.toUint8Array(),c.bcsSerializeUint64(n)],a?.optionalTransactionPayloadArgs));return await this.sendTx(i,a?.enableTransactionWaitAndSimulationArgs)}async transferCoin(t,e,n,a,i){let r=this.getSendTxPayload(t,await this.createRawTxObject(t.address(),(await this.getAccountInfo(t.address())).sequence_number,T,"supra_account","transfer_coins",[new s.TypeTagParser(a).parseTypeTag()],[e.toUint8Array(),c.bcsSerializeUint64(n)],i?.optionalTransactionPayloadArgs));return await this.sendTx(r,i?.enableTransactionWaitAndSimulationArgs)}async publishPackage(t,e,n,a){let i=new c.Serializer,r=[];for(let o=0;o<n.length;o++)r.push(new s.Module(Uint8Array.from(n[o])));c.serializeVector(r,i);let u=this.getSendTxPayload(t,await this.createRawTxObject(t.address(),(await this.getAccountInfo(t.address())).sequence_number,T,"code","publish_package_txn",[],[c.bcsSerializeBytes(e),i.getBytes()],a?.optionalTransactionPayloadArgs));return await this.sendTx(u,a?.enableTransactionWaitAndSimulationArgs)}async simulateTx(t){let e=t.Move.authenticator,n=JSON.parse(JSON.stringify(e));t.Move.authenticator=n,this.unsetAuthenticatorSignatures(t.Move.authenticator);let a=await this.sendRequest(!1,"/rpc/v1/transactions/simulate",t);if(t.Move.authenticator=e,a.data.output.Move.vm_status!=="Executed successfully")throw new Error(`Transaction simulation failed. Reason: ${a?.data?.output?.Move?.vm_status}`);return console.log("Transaction Simulation Done"),a.data}unsetAuthenticatorSignatures(t){let e="0x"+"0".repeat(128);"Ed25519"in t?t.Ed25519.signature=e:"FeePayer"in t?(t.FeePayer.sender.Ed25519.signature=e,t.FeePayer.fee_payer_signer.Ed25519.signature=e,t.FeePayer.secondary_signers.forEach(n=>{n.Ed25519.signature=e})):(t.MultiAgent.sender.Ed25519.signature=e,t.MultiAgent.secondary_signers.forEach(n=>{n.Ed25519.signature=e}))}async simulateTxUsingSerializedRawTransaction(t,e){let n={Move:{raw_txn:this.getRawTxnJSON(s.RawTransaction.deserialize(new c.Deserializer(e))),authenticator:t}};return await this.simulateTx(n)}};export{c as BCS,v as DEFAULT_CHAIN_ID,M as DEFAULT_ENABLE_SIMULATION,I as DEFAULT_GAS_PRICE,B as DEFAULT_MAX_GAS_FOR_SUPRA_TRANSFER_WHEN_RECEIVER_EXISTS,D as DEFAULT_MAX_GAS_FOR_SUPRA_TRANSFER_WHEN_RECEIVER_NOT_EXISTS,O as DEFAULT_MAX_GAS_UNITS,S as DEFAULT_RECORDS_ITEMS_COUNT,U as DEFAULT_TX_EXPIRATION_DURATION,F as DEFAULT_WAIT_FOR_TX_COMPLETION,N as DELAY_BETWEEN_POOLING_REQUEST,y as HexString,P as MAX_RETRY_FOR_TRANSACTION_COMPLETION,C as MILLISECONDS_PER_SECOND,J as RAW_TRANSACTION_SALT,H as RAW_TRANSACTION_WITH_DATA_SALT,f as SUPRA_COIN_TYPE,T as SUPRA_FRAMEWORK_ADDRESS,Y as SupraAccount,q as SupraClient,R as TransactionStatus,E as TxTypeForTransactionInsights,s as TxnBuilderTypes};
//# sourceMappingURL=index.mjs.map